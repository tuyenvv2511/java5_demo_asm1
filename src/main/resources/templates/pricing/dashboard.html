<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body th:replace="~{layout :: layout(content=~{::section})}">
<section th:fragment="content">
    <!-- Hero Section - ƒêi·ªÉm n·ªïi b·∫≠t c·ªßa ·ª©ng d·ª•ng -->
    <div class="jumbotron bg-gradient-primary text-white rounded-3 p-5 mb-5">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="display-4 fw-bold mb-3">
                        ü§ñ <span th:text="#{pricing.ai.title}">AI Pricing Intelligence</span>
                    </h1>
                    <p class="lead mb-4" th:text="#{app.ai.description}">
                        Thu·∫≠t to√°n AI th√¥ng minh ph√¢n t√≠ch xu h∆∞·ªõng th·ªã tr∆∞·ªùng v√† g·ª£i √Ω gi√° t·ªëi ∆∞u d·ª±a tr√™n d·ªØ li·ªáu b√°n h√†ng th·ª±c t·∫ø trong 30 ng√†y g·∫ßn ƒë√¢y
                    </p>
                    <div class="d-flex flex-wrap gap-3 mb-3">
                        <span class="badge bg-light text-dark px-3 py-2">
                            <i class="fas fa-chart-line me-2"></i>
                            <span th:text="#{pricing.feature.analysis}">Ph√¢n t√≠ch xu h∆∞·ªõng</span>
                        </span>
                        <span class="badge bg-light text-dark px-3 py-2">
                            <i class="fas fa-brain me-2"></i>
                            <span th:text="#{pricing.feature.smart}">G·ª£i √Ω th√¥ng minh</span>
                        </span>
                        <span class="badge bg-light text-dark px-3 py-2">
                            <i class="fas fa-shield-alt me-2"></i>
                            <span th:text="#{pricing.feature.reliability}">ƒê·ªô tin c·∫≠y cao</span>
                        </span>
                    </div>
                </div>
                <div class="col-lg-4 text-center">
                    <i class="fas fa-robot fa-5x text-white opacity-75"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Th·ªëng k√™ t·ªïng quan -->
    <div class="row mb-5 g-4">
        <div class="col-lg-3 col-md-6">
            <div class="card bg-primary text-white h-100">
                <div class="card-body text-center d-flex flex-column justify-content-center">
                    <div class="mb-3">
                        <i class="fas fa-shopping-cart fa-3x mb-3"></i>
                    </div>
                    <h2 class="display-6 fw-bold mb-2" th:text="${totalSales}">0</h2>
                    <p class="mb-0 fs-5 fw-medium" th:text="#{dashboard.transactions.30days}">Giao d·ªãch 30 ng√†y</p>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="card bg-success text-white h-100">
                <div class="card-body text-center d-flex flex-column justify-content-center">
                    <div class="mb-3">
                        <i class="fas fa-money-bill-wave fa-3x mb-3"></i>
                    </div>
                    <h2 class="display-6 fw-bold mb-2" th:text="${#numbers.formatInteger(totalValue,3,'POINT')}">0</h2>
                    <p class="mb-0 fs-5 fw-medium" th:text="#{dashboard.total.value}">T·ªïng gi√° tr·ªã (VNƒê)</p>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="card bg-info text-white h-100">
                <div class="card-body text-center d-flex flex-column justify-content-center">
                    <div class="mb-3">
                        <i class="fas fa-chart-bar fa-3x mb-3"></i>
                    </div>
                    <h2 class="display-6 fw-bold mb-2" th:text="${#numbers.formatInteger(averagePrice,3,'POINT')}">0</h2>
                    <p class="mb-0 fs-5 fw-medium" th:text="#{dashboard.average.price}">Gi√° trung b√¨nh</p>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="card bg-warning text-white h-100">
                <div class="card-body text-center d-flex flex-column justify-content-center">
                    <div class="mb-3">
                        <i class="fas fa-star fa-3x mb-3"></i>
                    </div>
                    <h2 class="display-6 fw-bold mb-2" th:text="${#lists.size(trendingProducts)}">0</h2>
                    <p class="mb-0 fs-5 fw-medium" th:text="#{dashboard.trending.products}">S·∫£n ph·∫©m c√≥ xu h∆∞·ªõng</p>
                </div>
            </div>
        </div>
    </div>

    <div class="row g-4">
        <!-- S·∫£n ph·∫©m c√≥ xu h∆∞·ªõng th√∫ v·ªã -->
        <div class="col-lg-8">
            <div class="card h-100">
                <div class="card-header">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-chart-line fa-2x text-primary me-3"></i>
                        <div>
                            <h5 class="mb-1 fw-bold">
                                <span th:text="#{pricing.trending.title}">S·∫£n ph·∫©m c√≥ xu h∆∞·ªõng gi√° th√∫ v·ªã</span>
                            </h5>
                            <small class="text-muted" th:text="#{dashboard.analysis.description}">Ph√¢n t√≠ch d·ª±a tr√™n d·ªØ li·ªáu th·ª±c t·∫ø v√† thu·∫≠t to√°n AI</small>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div th:if="${#lists.isEmpty(trendingProducts)}" class="text-center text-muted py-4">
                        <i class="fas fa-chart-line fa-3x mb-3"></i>
                        <p>Ch∆∞a c√≥ ƒë·ªß d·ªØ li·ªáu ƒë·ªÉ ph√¢n t√≠ch xu h∆∞·ªõng</p>
                    </div>
                    
                    <div th:unless="${#lists.isEmpty(trendingProducts)}" class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th th:text="#{product.title}">S·∫£n ph·∫©m</th>
                                    <th th:text="#{pricing.current.price}">Gi√° hi·ªán t·∫°i</th>
                                    <th th:text="#{pricing.ai.suggested}">Gi√° g·ª£i √Ω AI</th>
                                    <th th:text="#{pricing.trend}">Xu h∆∞·ªõng</th>
                                    <th th:text="#{pricing.confidence}">ƒê·ªô tin c·∫≠y</th>
                                    <th th:text="#{pricing.transactions}">Giao d·ªãch</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="product : ${trendingProducts}">
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <img th:if="${product.imageUrl != null}" 
                                                 th:src="${product.imageUrl}" 
                                                 class="me-2" 
                                                 style="width: 40px; height: 40px; object-fit: cover;">
                                            <div>
                                                <strong th:text="${product.title}">Product Title</strong>
                                                <br>
                                                <small class="text-muted" th:text="${product.brand.name}">Brand</small>
                                            </div>
                                        </div>
                                    </td>
                                    <td th:text="${#numbers.formatInteger(product.price,3,'POINT')}">4,200,000</td>
                                    <td>
                                        <strong th:text="${#numbers.formatInteger(product.pricingAnalysis.suggestedPrice,3,'POINT')}">4,100,000</strong>
                                    </td>
                                    <td>
                                        <span class="badge" 
                                              th:classappend="${product.pricingAnalysis.trend == 'RISING'} ? 'bg-success' : 
                                                             (${product.pricingAnalysis.trend == 'FALLING'} ? 'bg-danger' : 'bg-secondary')"
                                              th:text="${product.pricingAnalysis.trendIcon + ' ' + product.pricingAnalysis.trendText}">
                                            ‚û°Ô∏è ·ªîn ƒë·ªãnh
                                        </span>
                                    </td>
                                    <td>
                                        <div class="progress" style="height: 20px;">
                                            <div class="progress-bar" 
                                                 th:classappend="${product.pricingAnalysis.confidence >= 80} ? 'bg-success' : 
                                                                 (${product.pricingAnalysis.confidence >= 60} ? 'bg-warning' : 'bg-danger')"
                                                 th:style="'width: ' + ${product.pricingAnalysis.confidence} + '%'"
                                                 th:text="${product.pricingAnalysis.confidence} + '%'">
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="badge bg-info" th:text="${product.pricingAnalysis.salesCount}">5</span>
                                        <a th:href="@{/pricing/analyze/{id}(id=${product.id})}" 
                                           class="btn btn-sm btn-outline-primary ms-2" th:text="#{pricing.details}">Chi ti·∫øt</a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Top s·∫£n ph·∫©m b√°n ch·∫°y -->
        <div class="col-lg-4">
            <div class="card h-100">
                <div class="card-header">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-trophy fa-2x text-warning me-3"></i>
                        <h6 class="mb-0 fw-bold">
                            <span th:text="#{pricing.top.title}">S·∫£n ph·∫©m b√°n ch·∫°y nh·∫•t</span>
                        </h6>
                    </div>
                </div>
                <div class="card-body">
                    <div th:if="${#lists.isEmpty(topSellingProducts)}" class="text-center text-muted py-3">
                        <p th:text="#{pricing.no.data}">Ch∆∞a c√≥ d·ªØ li·ªáu</p>
                    </div>
                    
                    <div th:unless="${#lists.isEmpty(topSellingProducts)}" class="list-group list-group-flush">
                        <div th:each="item, iterStat : ${topSellingProducts}" 
                             class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <strong th:text="${item[1]}">Product Name</strong>
                                <br>
                                <small class="text-muted" th:text="${item[0]}">Brand</small>
                            </div>
                            <div class="text-end">
                                <div th:text="${#numbers.formatInteger(item[2],3,'POINT')}">4,200,000</div>
                                <small class="text-muted" th:text="${item[3]} + ' ' + #{common.transactions}">5 giao d·ªãch</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- C√°ch ho·∫°t ƒë·ªông c·ªßa AI -->
            <div class="card mt-4">
                <div class="card-header">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-cogs fa-2x text-info me-3"></i>
                        <h6 class="mb-0 fw-bold">
                            <span th:text="#{pricing.how.title}">C√°ch ho·∫°t ƒë·ªông</span>
                        </h6>
                    </div>
                </div>
                <div class="card-body">
                    <ol class="mb-0">
                        <li class="mb-2">
                            <strong th:text="#{pricing.how.step1}">Thu th·∫≠p d·ªØ li·ªáu:</strong><br>
                            <small th:text="#{pricing.how.step1.desc}">Ph√¢n t√≠ch t·∫•t c·∫£ giao d·ªãch 30-60 ng√†y g·∫ßn ƒë√¢y</small>
                        </li>
                        <li class="mb-2">
                            <strong th:text="#{pricing.how.step2}">Ph√¢n t√≠ch xu h∆∞·ªõng:</strong><br>
                            <small th:text="#{pricing.how.step2.desc}">So s√°nh gi√° trung b√¨nh theo t·ª´ng giai ƒëo·∫°n</small>
                        </li>
                        <li class="mb-2">
                            <strong th:text="#{pricing.how.step3}">ƒêi·ªÅu ch·ªânh theo t√¨nh tr·∫°ng:</strong><br>
                            <small th:text="#{pricing.how.step3.desc}">√Åp d·ª•ng h·ªá s·ªë d·ª±a tr√™n condition (NEW, USED, etc.)</small>
                        </li>
                        <li>
                            <strong th:text="#{pricing.how.step4}">G·ª£i √Ω t·ªëi ∆∞u:</strong><br>
                            <small th:text="#{pricing.how.step4.desc}">ƒê∆∞a ra gi√° ƒë·ªÅ xu·∫•t v·ªõi ƒë·ªô tin c·∫≠y cao</small>
                        </li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</section>
</body>
</html>

</html>
